* TODO Tasks

** [ ] Set up 'B' and 'N' as tap-preferred layer keys for LOWER and RAISE (Opposite-Hands Rule)
** [ ] Implement 'sticky layer' that is active until a specific key (e.g., Space) is pressed
** [ ] Implement a combo for one-shot layers (&osl) to improve layer access
** [ ] Explore One-Shot Mods (`&sk`) in Combos
   - **Goal:** Allow easy access to modifiers on layers where Home Row Mods are deactivated (e.g., gaming layers).
   - **Details:** Investigate binding `&sk <modifier>` (e.g., `&sk LSHFT`) to a combo. This enables a "one-shot" modifier effect without dedicating a full key or relying on HRMs.
** [ ] Implement Combo for Layer Toggling (`&tg`) or Turning On (`&to`)
   - **Goal:** Enable semi-permanent layer switching using key combos, similar to QMK's `TO()` or `TG()`.
   - **Details:** Define a combo (e.g., `ZA`) that, when pressed, switches to a specific layer (e.g., `GAMING`) until explicitly exited.
** [ ] Finalize QMK wrapper porting
   - [ ] Review and update comments in `config/wrappers.dtsi` to be ZMK-specific.
** [ ] Populate `___SOFLE_THUMBS_...___` macros for sofle keyboard
     this is so low priority for me because ill never use the majority of keys, however
     i think i will set the sofle up as the main gaming keyboard, might as well,
     so with that in mind we can put the extra keys to better use, probably add a second gaming layer too (not just the roguelike layer, but something different like i used to have. as well as full mod keys available)
** [ ] Port Missing QMK Features
   - [ ] **Per-Key Tapping Term:** Your QMK config uses a longer tapping term for weaker pinky fingers.
     - To port this, create new `hold-tap` behaviors in `config/behaviors.dtsi` (e.g., `hml_pinky`) with a longer `tapping-term-ms` (e.g., 185).
     - Apply this new behavior to the pinky home-row keys (`A`, `;`) in `config/wrappers.dtsi`.
   - [ ] Add '.' key to LOWER layer for easier numeric input (e.g., "2.5").
   - [ ] Ensure '::' and '->' macros are accessible/used in wrappers; remove '..=' macro.
** [ ] Add combo to return to BASE layer (on second gaming layer and roguelike layer).
** [ ] Utilize One-Shot Key Modifier Combos on the ROGUELIKE layer.
** [ ] Implement top-row mirrored GACS one-shot modifier combos (e.g., QW for GUI, WE for Alt, ER for Ctrl, RT for Shift on left hand, mirrored on right).
** [ ] Add combo for single quote (e.g., 'nm') for faster comment/sentence writing.

* DONE Tasks

** [X] Fix timing values to match QMK configuration.
** [X] Implement programming combos for auto-pairing brackets and operators.
** [X] Fix Sofle display widgets build error for the right-hand side.
** [X] Finalize QMK wrapper porting
   - [X] Implement `ADJUST` layer functionality.
   - [X] Adapt the `BLANK_TEMPLATE` to ZMK conventions.
** [X] Define thumb key layouts
   - [X] Populate `___SWEEP_THUMBS_...___` macros for cradio/sweep keyboard.
** [X] Port Missing QMK Features
   - [X] **One-Shot Mods on Thumbs:** Your QMK thumb clusters use One-Shot Mods extensively. This is a major ergonomic feature to port.
   - [X] **"J + K" Combo for Escape:** Your QMK config uses `J+K` for `Escape` (Vim style).
   - [X] **Advanced Home Row Mod Tuning:** Your QMK config uses `PERMISSIVE_HOLD`, `SPECULATIVE_HOLD`, and `FLOW_TAP_TERM` for a very specific feel. A direct 1:1 port is not possible, but you can approximate it.
** [X] Define encoder behavior (Migrated to flexible sensor_rot_kp)
   - [X] Investigate migrating from `&inc_dec_kp` to the more flexible `&sensor_rotate` behavior. (COMPLETED - implemented `sensor_rot_kp` behavior in `config/behaviors.dtsi` and updated wrapper macros in `config/wrappers.dtsi`)
   - [X] Customize encoder behavior for each layer. (COMPLETED - now possible by overriding `sensor-bindings` in keymap layers using `&sensor_rot_kp`)
** [X] Implement advanced layer management
   - [X] **Sticky Layers (&sk):** Configure sticky layers for momentary layer access.
   - [X] Conditional/Tri-Layers: Set up a "tri-layer" that activates when both `LOWER` and `RAISE` layers are active. (COMPLETED by Gemini CLI)
   - [X] **Long-press for ADJUST layer:**
** [X] Add new combos and tap-dances
   - [X] **Combos (QMK's "Chordal"):**
** [X] Implement Advanced Key Behaviors
   - [X] **Fix `CAPS_WORD` interaction with Tap Dance keys (`TD_Q_ESC`)**
   - [X] **Smart Key Repeat:** Add key repeat to home-row mods. This allows a letter to repeat on a double-tap-and-hold, which is not possible with a standard hold-tap.
** [X] Configure Sofle Hardware
   - [X] **Add status widgets to OLED:** The `sofle.conf` file currently enables the display but is missing the required flags for useful widgets. Add the following flags to enable them:
   - [X] **Add WPM widget to OLED:**
   - [X] Add RGB underglow support to indicate the current layer.
** [X] Integrate external modules
   - [-] **`zmk-tri-state`:**
** [X] Explore advanced ZMK behaviors (QMK Equivalents)
    - [X] **`CAPS WORD`:** Add `CONFIG_ZMK_CAPS_WORD=y` and a keybinding for it.
    - [X] **Dynamic Macros:** Investigate and enable `CONFIG_ZMK_MACRO_DYNAMIC=y` for on-the-fly macro recording.
    - [X] **Speculative Hold:** Use the `hold-while-undecided` property in hold-tap behaviors to reduce modifier lag.
    - [X] **Permissive Hold:** Use the `"balanced"` flavor for hold-tap behaviors for a more responsive feel for fast typists.
    - [X] **Per-key Tapping Term:** Use the `tapping-term-ms` property on specific hold-tap bindings that need a custom value.
    - [X] **Numword (Smart Layers):** Implement behavior where the layer stays active only while typing numbers, deactivating on space/letter.
    - [X] **Mod-Morphs (Contextual Keys):** Expand usage beyond `bs_del`, e.g., smart dot ('.', '..', '/'), grave escape ('Esc' to '`' when GUI is held).
** [X] Configure BIOS/Bootloader Compatibility (NKRO)
   - [X] NOTE: ZMK defaults to 6KRO, which is safe for BIOS. Enabling NKRO (`CONFIG_ZMK_HID_REPORT_TYPE_NKRO=y`) improves OS performance but may break BIOS compatibility.
   - [X] NOTE: Unlike QMK, there is no runtime keybinding to toggle between 6KRO and NKRO. The mode is set at compile time. QMK's `NK_TOGG` keycode is not directly portable.
   - [X] DECISION: Decide whether to enable NKRO by default and test for BIOS compatibility.
   - [X] ACTION: Add `CONFIG_ZMK_HID_REPORT_TYPE_NKRO=y` to the `.conf` files if NKRO is desired.
** [X] Merge `wrappertest` branch
** [X] ZMK Studio Integration