# Copyright (c) 2020 Ryan Cross
# SPDX-License-Identifier: MIT

# Power Management - go to sleep after a half hour (1800000ms = 30 min)
CONFIG_ZMK_IDLE_TIMEOUT=180000
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=1800000

# Use experimental updated BLE settings for better performance
# Uncomment if you want to test (may improve connection stability)
# CONFIG_ZMK_BLE_EXPERIMENTAL_CONN=y

# Display - Enable the Sofle OLED Display
CONFIG_ZMK_DISPLAY=y
# Force the display to use the system work queue (Standard for Sofle)
CONFIG_ZMK_DISPLAY_WORK_QUEUE_SYSTEM=y

# Only enable display widgets on the central side (left half)
# The peripheral side (right half) does not have the necessary dependencies
# to build these widgets, leading to linker errors.

# external power
CONFIG_ZMK_EXT_POWER=y

# Encoders - Add support for rotary encoders
CONFIG_EC11=y
CONFIG_EC11_TRIGGER_GLOBAL_THREAD=y

# Debounce settings (uncomment if you experience chattering)
# CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=2
# CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=2

# RGB Underglow / Backlight Support
CONFIG_ZMK_RGB_UNDERGLOW=y

# Auto-off RGB when idle (saves battery)
CONFIG_ZMK_RGB_UNDERGLOW_AUTO_OFF_IDLE=y

# Auto-off RGB when USB disconnected (saves battery)
CONFIG_ZMK_RGB_UNDERGLOW_AUTO_OFF_USB=y

# Don't turn off external power when toggling RGB
# (This prevents the display from turning off when you toggle RGB)
CONFIG_ZMK_RGB_UNDERGLOW_EXT_POWER=n

# RGB Startup Settings - Purple for base layer
CONFIG_ZMK_RGB_UNDERGLOW_BRT_START=100
CONFIG_ZMK_RGB_UNDERGLOW_HUE_START=270
CONFIG_ZMK_RGB_UNDERGLOW_SAT_START=100
CONFIG_ZMK_RGB_UNDERGLOW_EFF_START=0
CONFIG_ZMK_RGB_UNDERGLOW_ON_START=y

# Increase BLE transmit power for better connection range (optional)
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# Mouse/Pointing support (experimental)
CONFIG_ZMK_MOUSE=y
CONFIG_ZMK_POINTING=y

# Logging (uncomment for debugging, will use more battery)
# CONFIG_ZMK_USB_LOGGING=y
